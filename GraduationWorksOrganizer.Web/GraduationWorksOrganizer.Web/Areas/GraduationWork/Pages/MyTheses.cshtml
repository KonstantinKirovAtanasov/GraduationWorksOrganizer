@page
@model GraduationWorksOrganizer.Web.Areas.GraduationWork.Pages.MyThesesModel
@{
}

<h1> Моите теми</h1>

@if (Model.Theseses.Any())
{
    foreach (GraduationWorksOrganizer.Web.Areas.GraduationWork.ViewModels.PreviewThesisViewModel thesisModel in Model.Theseses)
    {
        <a class="container btn btn-light collapsible">
            <div class="row">
                <div class="text-left">
                    <h4 class="text-center">@thesisModel.Title</h4>
                </div>
                <div class="text-right">
                </div>
            </div>
        </a>
        <div class="collapsible-content border-info">
            <p class="font-weight-bold">Описание</p>
            <p class="text-md-left">@thesisModel.Description </p>

            <p class="font-weight-bold">Изисквания</p>
            @foreach (GraduationWorksOrganizer.Web.Areas.GraduationWork.ViewModels.RequermentViewModel requerment in thesisModel.Requerments)
            {
                <div class="row">
                    <div class="col text-left">
                        <text>&#8226;</text>
                        <text>@requerment.Description</text>
                    </div>
                    <div class="col text-right">
                        <text>@requerment.MaxPointsCount точки</text>
                    </div>
                </div>
            }
            <span />
            <div class="row">
                <div class="col text-left">
                    <text>@thesisModel.Type</text>
                </div>
                <div class="col text-right">
                    <text>@thesisModel.CreationDate.ToShortDateString() </text>
                </div>
            </div>
        </div>
    }
}
else
{
    <h3>Нямате записани теми</h3>
}

@section Scripts{
    <script>
        let collapsable = document.getElementsByClassName('collapsible');

        window.onload = RegisterHandlers();

        function OnClickEventHandler(event) {
            let item = event.target;
            let collapseHeader = item.closest('a');
            if (collapseHeader == null) {
                collapseHeader = item;
            }

            let content = collapseHeader.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        }

        function RegisterHandlers() {
            for (let i = 0; i < collapsable.length; i++)
                collapsable[i].addEventListener('click', OnClickEventHandler);
        }
    </script>
}
